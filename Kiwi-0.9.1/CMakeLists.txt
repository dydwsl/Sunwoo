CMAKE_MINIMUM_REQUIRED ( VERSION 2.8 )

PROJECT ( "kiwi_cli" )
SET ( PROJECT_VERSION_MAJOR 6 )
SET ( PROJECT_VERSION_MINOR 6 )

SET ( CMAKE_BUILD_TYPE Release )
SET ( CMAKE_VERBOSE_MAKEFILE false )

SET ( OUTPUT_ELF "${CMAKE_PROJECT_NAME}-0.${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.out" )
SET ( SRC_FILES
  src/runner.cpp
  src/core/Kiwi.cpp
  src/core/KFeatureTestor.cpp
  src/core/KForm.cpp
  src/core/KModelMgr.cpp
  src/core/KNLangModel.cpp
  src/core/KTrie.cpp
  src/core/KWordDetector.cpp
  src/core/Utils.cpp
)

SET ( CMAKE_C_COMPILER "gcc" )


ADD_COMPILE_OPTIONS ( -g -Wall -std=c++1y )
LINK_LIBRARIES ( pthread )
SET ( CMAKE_EXE_LINKER_FLAGS "-static -Wl,--gc-sections" )

SET ( CMAKE_C_FLAGS_DEBUG "-DDEBUG -DC_FLAGS" )
SET ( CMAKE_EXE_LINKER_FLAGS_DEBUG "-DDEBUG -DLINKER_FLAGS" )

SET ( CMAKE_C_FLAGS_RELEASE "-DRELEASE -DC_FLAGS" )
SET ( CMAKE_EXE_LINKER_FLAGS_RELEASE "-DRELEASE -DLINKER_FLAGS" )

SET ( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BUILD_TYPE} )
SET ( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BUILD_TYPE}/lib )
SET ( CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BUILD_TYPE}/lib )

ADD_EXECUTABLE( ${OUTPUT_ELF} ${SRC_FILES} )
